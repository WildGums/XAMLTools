<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <XAMLToolsPath Condition="$(XAMLToolsPath) == ''">$(MSBuildThisFileDirectory)</XAMLToolsPath>
    <XAMLToolsAssemblyDirectory Condition="$(MSBuildRuntimeType) == 'Core'">$(XAMLToolsPath)netstandard2.0</XAMLToolsAssemblyDirectory>
    <XAMLToolsAssemblyDirectory Condition="$(MSBuildRuntimeType) != 'Core'">$(XAMLToolsPath)net472</XAMLToolsAssemblyDirectory>
    <XAMLToolsAssembly Condition="$(XAMLToolsAssembly) == ''">$(XAMLToolsAssemblyDirectory)\XAMLTools.MSBuild.dll</XAMLToolsAssembly>

    <XAMLToolsToolDirectory Condition="$(MSBuildRuntimeType) == 'Core'">$(XAMLToolsPath)tools\netcoreapp3.1\</XAMLToolsToolDirectory>
    <XAMLToolsToolDirectory Condition="$(MSBuildRuntimeType) != 'Core'">$(XAMLToolsPath)tools\net472\</XAMLToolsToolDirectory>
    <XAMLToolsExecutable>$(XAMLToolsToolDirectory)XAMLTools.exe</XAMLToolsExecutable>

    <MsBuildMajorVersion>15</MsBuildMajorVersion>
    <MsBuildMajorVersion Condition="'$(MSBuildVersion)' != ''">$([System.Version]::Parse($(MSBuildVersion)).Major)</MsBuildMajorVersion>
  </PropertyGroup>

  <PropertyGroup Label="XAMLCombine">
    <RemoveXAMLCombineItemsFromPages Condition="'$(Configuration)' == 'Release'">true</RemoveXAMLCombineItemsFromPages>
  </PropertyGroup>

  <PropertyGroup Label="XAMLColorSchemeGenerator">
    <RemoveXAMLColorSchemeGeneratorItemsFromPages>true</RemoveXAMLColorSchemeGeneratorItemsFromPages>
    <EmbedXAMLColorSchemeGeneratorInputs>true</EmbedXAMLColorSchemeGeneratorInputs>
  </PropertyGroup>

  <PropertyGroup Label="TargetOrder">
    <XAMLToolsXAMLCombineTargetTargetsBefore>
      BeforeCompile;
      CoreCompile;
    </XAMLToolsXAMLCombineTargetTargetsBefore>

    <XAMLToolsXAMLColorSchemeGeneratorTargetTargetsBefore>
      BeforeCompile;
      CoreCompile;
    </XAMLToolsXAMLColorSchemeGeneratorTargetTargetsBefore>

    <!-- Ensure XAMLTools run prior to XAML's Markup Compiler in order to have the generated files available. -->
    <MarkupCompilePass1DependsOn>$(MarkupCompilePass1DependsOn);XAMLToolsXAMLColorSchemeGeneratorTarget;XAMLToolsXAMLCombineTarget</MarkupCompilePass1DependsOn>
  </PropertyGroup>
</Project>